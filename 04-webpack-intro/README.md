# Webpack Intro

Most modern web frameworks, make use of external libraries and need to preprocess files. React is 
no different.

Webpack is a "module bundler". Webpack takes modules with dependencies and generates static assets 
representing those modules. In other words Webpack preprocesses your files and combines them into
fewer files that will run your web app. 

Weppack works with NPM packages. These are small libraries each containing a snippet of code.
A package might contain a small snippet of code along with a link to another package that it 
depends on. The source for all packages is in the node_modules folder. 
When building a project Webpack will combine all of these files into a single JS file that your
production app will use.

You can also instruct Webpack to do other things like preprocess CSS files, start a web service 
minimize the file size of files, and more. 

## Webpack tutorial 

For more info read this: 

- https://webpack.js.org/concepts/

Follow the tutorial below. This tutorial walks you through setting up Webpack to work with React. 
It also explains many of the things that Webpack is doing along the way. 

### NPM

To follow the tutorial you will use Node Package Manager or NPM. To use NPM you need to install Node. 
Follow the guide here it will walk you through all of the steps. 

- https://docs.npmjs.com

Once you have npm installed follow this tutorial on Webpack.

- http://ccoenraets.github.io/es6-tutorial-react/setup/

<!-- https://scotch.io/tutorials/setup-a-react-environment-using-webpack-and-babel -->
<!-- https://blog.madewithenvy.com/getting-started-with-webpack-2-ed2b86c68783 -->
<!-- https://www.sitepoint.com/beginners-guide-to-webpack-2-and-module-bundling/ -->
<!-- https://blog.madewithenvy.com/getting-started-with-webpack-2-ed2b86c68783 -->

### What are all of these files? 

**package.json**

- This file is written in *json*, it holds the project configuration for Node.

Open it and look at the contents. It contains some meta info:

- `'name'`
- `'version'`
- `'description'`
- etc.

- `'dependencies'` : This is a list of files your project depends on in production.
- `'devDependencies'`: these packages are only needed for development and testing.
 
- `'scripts'` : This is a list of commands you can have Node run for you.

For more info on package.json: https://docs.npmjs.com/files/package.json
    
**webpack.config.js**

This file is written in *JavaScript*. Open it up and take look.

- `entry` : points to the top level files bundled with your app. 
    
- `output` : Defines how the bundle will be output
  - `path` : defines the output directory
  - `filename` : Set hte file name of for the output bundle

- `module` : Define modules that you web pack should use
  - `loaders` : These are modules that load and process files. The example uses `'babel-loader'` to 
  process files with the `'.js'` and `'.jsx'` file extensions. 

- `plugins` : Add plugins to extend the functionality of Webpack.

And more! Read up on webpack and `webpack.config.js` here: 

- https://webpack.github.io/docs/configuration.html

**index.html** 

This is the entry point for the app. Look at this file closely. You should find 

`<div id="app></div>`

This is the elment that will your react elements. React will render all of the components
here. 

`<script src="build/app.bundle.js"></script>`

At this point your are loading bundle.js from the build folder. This file contains all 
of the code generated by your React components when your project is built. Remember 
React uses JSX which needs to transpiled into vanilla JavaScript. 

**js/app.js**

In this project all of the React components and other app logic are placed here. This 
file also contains: 

`ReactDOM.render(<App/>, document.getElementById("app"));`

This line sets up ReactDOM and configures it to render the App component to the 
element with the id name 'app'. 

**css/styles.css**

This file contains CSS used by the app. 

### Starting from this example

This example placess all of the React classes and code in app.js. You can delete this and 
begin from here. You'll need to remember to keep the last line of code: 

`ReactDOM.render(<App/>, document.getElementById("app"));`

---

### Webpack boilerplate 

There are many React/Webpack boilerplate projects available on Github. These are projects 
that have all of the default files and configuration set up. You will need to only run 
`npm install` to get started. 

Boilerplate projects can save time and start you off in a good place but, they also 
impose the work flow and organization system prefered by the author. It's up to you what 
to use. 

You can browse vaious React starter projects here: http://andrewhfarmer.com/starter-project/

#### Create React App

Create React app is a command line tool from FaceBook that builds a pretty good starter 
project, try it here: https://github.com/facebookincubator/create-react-app

Note! Create React App does not use Webpack, it uses a similar but different system. Be sure
to read the documentation. Find the documentation for Create React App [here](https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md).

Here are two more you might try. These two projects contain Redux, which is an app state
management library that works with React. Installing it with your starter project is 
easier than adding it later. If you think you might use Redux in the future you might 
want to intall from the start.

- https://github.com/DimitriMikadze/express-react-redux-starter
- https://github.com/davezuko/react-redux-starter-kit

## Another Look at react

Now that you have installed and set up react with Webpack browse the projects. You may notice
that some of the things look a little different. 

### Import, Export, default and Module

Import, Export, default are an altertantive to require. These are part of a feature called
ES6 Modules which is not supported by yet. These do the same thing that require() and module.exports
does. Behind the scenes the new syntax is compiled by Babel to require() and module.exports. In the 
future ES6 Modules will have support. 

Read more about this:

http://adrianmejia.com/blog/2016/08/12/Getting-started-with-Node-js-modules-require-exports-imports-npm-and-beyond/

Modules are imported using node. Each file acts as a "module". A module is a seprate object 
and contains all elements defined in the **file** in a separate scope. To link code from 
module to module you'll need to export and export. 

Import any library installed via node with it's name. For example 

`import SomeLibrary from 'some-library';`

The line above gets the default export from some-library. Some libraries will export more than
the default. To get these other exports use: 

`import React, { Component } from 'react';`

Here React is the default export, while Component is another export. 

Any file you create can export can export elements like this: 

`export default App;`

Or 

`export calculator;`

To import files that you have created that are not npm modules you need to include a path. If
the exports above were defined in the file app.js in the src folder you might use: 

`import App, { Calculator } from './src/app';`

### Components

Continue from the tutorial example by adding React. 

```
import React, { Component } from 'react';
import {render} from 'react-dom';
import AwesomeComponent from './AwesomeComponent.js';

class App extends Component {
  render () {
    return (
        <div>
            <p>New and Improved</p>
            <AwesomeComponent />
        </div>);
  }
}

render(<App/>, document.getElementById('app'));
```

Take a look at the first line: `import React from 'react';`

This imports the default item from 'react.js'. Since this file is in the node_modules folder you do 
not need to include a path. 

Look at line 2: `import {render} from 'react-dom';`

Similiar to the first line this time you importing an item named 'render' from 'react-dom.js'. 

Imported items can be variables, functions (class objects). 

Consider this change: 

```
import React, {Component} from 'react'; // Added {Component} 
import AwesomeComponent from './AwesomeComponent.js';

class App extends Component { // Removed React. here
  render () {
    return (
        <div>
            <p>New and Improved</p>
            <AwesomeComponent />
        </div>);
  }
}
```

Here you imported React (default), and Component (a sub module of React). Notice 
`class App extends Component`, now you only need Component in place of React.Component. 

## Webpack Dev Server

Webpack Dev Server is a local web server that you can easily add to your Webpack projects. Use it to
test your projects locally before deploying to a live web host. Read more here: 

- https://webpack.github.io/docs/webpack-dev-server.html

When you ran Webpack dev server in the previous example, Webpack created files in `src/client/`.
This is the path for your production app. Then started the Webpack local server. Run the 
line below in the console. 

`webpack-dev-server --content-base src/client/`

Now visit: `http://localhost:8080`. This should serve your web site.

## Webpack React Challenge

Once you've worked through the Webpack tutorial try these challenges: 

- Try installing the Webpack Hot Loader: http://gaearon.github.io/react-hot-loader/getstarted/
- Use the Webpack project to rebuild one of the earlier projects. 
- Follow this tutorial it covers everything we've talked about: 
https://medium.com/wdstack/dont-be-afraid-of-react-library-guide-81f673d24684#.m832qcdcu

## Webpack React Boilerplate/Starter

The whole process of setting up Webpack is a little involved. Understand that you shouldn't have to 
do it for every new project, unless you want to! 

You can create the Webpack example above and save it 
as a starter project for future projects. In this case **You can delete the node_modules folder**. 
This allows you to store your starter project with out all of the dependancies. When starting a new 
project copy the folder, navigate the new folder in the terminal and run `npm install`, npm will 
download and install of the dependancy files again. 

Use one of the many provided by the open source community. You should read the notes and pay attention 
but, generally they will work in the same way as described above. Here a few that I found: 

- https://github.com/erikras/react-redux-universal-hot-example
- https://github.com/nicksp/redux-webpack-es6-boilerplate
- https://github.com/davezuko/react-redux-starter-kit
- https://github.com/StephenGrider/ReduxSimpleStarter

## Resources

- More React + Webpack Tutorials
    - https://medium.com/wdstack/dont-be-afraid-of-react-library-guide-81f673d24684#.m832qcdcu
- http://webpack.github.io/docs/what-is-webpack.html
- https://blog.risingstack.com/using-react-with-webpack-tutorial/
- https://www.codementor.io/tamizhvendan/tutorials/beginner-guide-setup-reactjs-environment-npm-babel-6-webpack-du107r9zr

